const d={API:"https://devvdiego-blog.x10.mx",BLOG:"https://api-devvdiego.infinityfreeapp.com"};class u{customFetch=fetch;baseHeaders={"Content-Type":"application/json"};setFetch(s){this.customFetch=s}async request(s,e,r={}){const n={method:s,headers:{...this.baseHeaders,...r.headers}};r.body&&(n.body=r.body);try{const t=await this.customFetch(e,n),o=t.status;let a;try{a=await t.json()}catch{a={success:!1,message:`Invalid JSON response (status: ${o})`,data:null}}const h={...a,status:o,ok:t.ok&&a.success,isSuccess:a.success===!0,isError:a.success===!1,isServerError:o>=500,isClientError:o>=400&&o<500};if(o>=500)throw new c(o,`Server error: ${a.message||"Internal server error"}`);return h}catch(t){throw t instanceof c?t:new c(0,`Network error: ${t instanceof Error?t.message:"Connection failed"}`)}}async get(s,e={}){return this.request("GET",s,{headers:e})}async post(s,e="",r={}){return this.request("POST",s,{headers:r,body:e})}async patch(s,e,r){return this.request("PATCH",s,{headers:r,body:e})}}class c extends Error{constructor(s,e){super(e),this.status=s}}const p=new u;export{c as A,p as a,d as c};

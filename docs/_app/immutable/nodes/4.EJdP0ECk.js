import{r as e}from"../chunks/CJMxHd4J.js";import{a as s,c as n,A as i}from"../chunks/DkKd-2ZO.js";import{c,a as f}from"../chunks/DyXVPLU6.js";import{f as m}from"../chunks/BmrPca9F.js";import{s as l}from"../chunks/Brl8uhil.js";const p=!1,u=async({fetch:o})=>{const r=sessionStorage.getItem("blog_jwt");if(!r)throw e(307,"/");try{if(s.setFetch(o),!(await s.post(`${n.API}/admin/verify`,"",{Authorization:`Bearer ${r}`})).success)throw new Error("Invalid token");return{authenticated:!0}}catch(t){if(t instanceof i&&(t.status==401||t.status==403))throw sessionStorage.removeItem("blog_jwt"),e(307,"/");t instanceof Error&&console.error("Error when fetching: ",t)}},v=Object.freeze(Object.defineProperty({__proto__:null,load:u,ssr:p},Symbol.toStringTag,{value:"Module"}));function y(o,r){var t=c(),a=m(t);l(a,()=>r.children),f(o,t)}export{y as component,v as universal};

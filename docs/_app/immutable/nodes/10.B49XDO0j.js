import{e as y}from"../chunks/CJMxHd4J.js";import{a as ye,c as ee,A as he}from"../chunks/DkKd-2ZO.js";import{f as g,a as p,t as xe}from"../chunks/LaR_1xaD.js";import{p as we,N as U,M as G,s as t,t as K,a as $e,O as Q,e as Ce,c as s,J as a,f as W,$ as Ee,r as i}from"../chunks/CdN2SWA2.js";import{d as Ae,e as Pe,s as Se}from"../chunks/DrgnjvF2.js";import{i as R}from"../chunks/TPp9-UXl.js";import{h as ke}from"../chunks/CoeFSb8G.js";import{I as b}from"../chunks/DYbc0og1.js";import{S as X,T as Z,C as De}from"../chunks/DJB8cbbm.js";const Te=async({params:m})=>{try{return{post:(await ye.get(`${ee.API}/blog/${m.post}`)).data[0],current_post_slug:m.post}}catch(v){v instanceof he&&v.status==401&&y(404,`Route: "${m.post}" was not found.`),v instanceof Error&&y(400,"An error ocurred"),y(400,"An unexpected error occurred")}},Ue=Object.freeze(Object.defineProperty({__proto__:null,load:Te},Symbol.toStringTag,{value:"Module"}));var je=g('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4 relative"> <button class="absolute top-3 right-3">x</button></div>'),ze=g('<div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4 relative">Post correctly edited! <button class="absolute top-3 right-3">x</button></div>'),Ie=g("<option>Seleccionar un tiempo</option> <option>1 min</option> <option>2 min</option> <option>3 min</option> <option>4 min</option> <option>5 min</option> <option>7 min</option> <option>10 min</option> <option>15 min</option> <option>20 min</option> <option>25 min</option>",1),Me=g("<option>Categoría</option> <option>Tecnología</option> <option>Tutoriales</option> <option>Noticias</option>",1),Ne=g('<span class="flex items-center"><svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Enviando...</span>'),Re=g('<main class="container py-24 mx-auto p-4 max-w-4xl"><header><h1 class="text-2xl font-bold mb-6">Editando un post</h1></header> <!> <!> <form class="space-y-6"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="space-y-2"><!></div> <div class="space-y-2"><!></div></div> <div class="grid grid-cols-2 items-end gap-4"><div class="space-y-2"><!></div> <div class="space-y-2"><!></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="space-y-2"><!></div> <div class="space-y-2"><!></div></div> <div class="space-y-2"><!></div> <div class="space-y-2"><!></div> <div class="space-y-2"><!></div> <div class="flex gap-4 pt-4"><button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"><!></button> <button type="button" class="px-6 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500">Limpiar</button></div></form></main>');function Ge(m,v){we(v,!0);let o=U(G({...v.data.post})),te=v.data.current_post_slug,q=U("No details"),d=G({success:!1,error:!1,loading:!1});const O=()=>{Q(o,{title:"",slug:"",technology:"",date:"",read_time_estimation:0,author_name:"Diego Varela",author_degree:"Systems Engineer",summary:"",content:[],conclusion:"",tags:""},!0)};function oe(){a(o).title&&(a(o).slug=a(o).title.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"))}async function ae(e){e.preventDefault(),d.loading=!0;try{let r=sessionStorage.getItem("blog_jwt");r===null&&y(401,"Not authorized");const l={method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(a(o))},n=await fetch(`${ee.API}/admin/blog/post/${te}`,l);if(!n.ok){const u=await n.text();throw Q(q,u,!0),new Error(`Error ${n.status}: ${u}`)}d.success=!0,O()}catch(r){r instanceof Error?console.error("Error enviando formulario:",r):console.error("Unknown error captured during post loading: ",r)}finally{d.loading=!1}}var h=Re();ke("1w589t1",e=>{Ce(()=>{Ee.title="Editando post - Admin"})});var Y=t(s(h),2);{var re=e=>{var r=je(),l=s(r),n=t(l);n.__click=()=>d.error=!1,i(r),K(()=>Se(l,`An error ocurred. Details: ${a(q)??""} `)),p(e,r)};R(Y,e=>{d.error&&e(re)})}var B=t(Y,2);{var se=e=>{var r=ze(),l=t(s(r));l.__click=()=>d.success=!1,i(r),p(e,r)};R(B,e=>{d.success&&e(se)})}var x=t(B,2),w=s(x),$=s(w),ie=s($);b(ie,{type:"text",id:"title",label:"Title",placeholder:"Post title",oninput:oe,isRequired:!0,get value(){return a(o).title},set value(e){a(o).title=e}}),i($);var H=t($,2),ne=s(H);b(ne,{type:"text",id:"slug",label:"Slug",placeholder:"slug-for-the-post",isRequired:!0,get value(){return a(o).slug},set value(e){a(o).slug=e}}),i(H),i(w);var C=t(w,2),E=s(C),le=s(E);b(le,{type:"date",id:"date",label:"Date",placeholder:"DD-MM-YYYY",isRequired:!0,get value(){return a(o).date},set value(e){a(o).date=e}}),i(E);var J=t(E,2),de=s(J);X(de,{id:"read_time_estimation",label:"Tiempo de lectura",get value(){return a(o).read_time_estimation},set value(e){a(o).read_time_estimation=e},children:(e,r)=>{var l=Ie(),n=W(l);n.value=n.__value="";var u=t(n,2);u.value=u.__value="1";var c=t(u,2);c.value=c.__value="2";var _=t(c,2);_.value=_.__value="3";var T=t(_,2);T.value=T.__value="4";var j=t(T,2);j.value=j.__value="5";var z=t(j,2);z.value=z.__value="7";var I=t(z,2);I.value=I.__value="10";var M=t(I,2);M.value=M.__value="15";var N=t(M,2);N.value=N.__value="20";var F=t(N,2);F.value=F.__value="25",p(e,l)},$$slots:{default:!0}}),i(J),i(C);var A=t(C,2),P=s(A),ue=s(P);X(ue,{id:"category",label:"Selecciona una categoria",isDisabled:!0,value:"",children:(e,r)=>{var l=Me(),n=W(l);n.value=n.__value="";var u=t(n,2);u.value=u.__value="tecnologia";var c=t(u,2);c.value=c.__value="tutoriales";var _=t(c,2);_.value=_.__value="noticias",p(e,l)},$$slots:{default:!0}}),i(P);var L=t(P,2),ve=s(L);b(ve,{type:"text",label:"Etiquetas (separados por comas)",id:"tags",placeholder:"svelte, javascript, webdev",get value(){return a(o).tags},set value(e){a(o).tags=e}}),i(L),i(A);var S=t(A,2),ce=s(S);Z(ce,{id:"summary",label:"Resumen",get value(){return a(o).summary},set value(e){a(o).summary=e}}),i(S);var k=t(S,2),pe=s(k);De(pe,{label:"Content *",get postContent(){return a(o).content},set postContent(e){a(o).content=e}}),i(k);var D=t(k,2),_e=s(D);Z(_e,{id:"conclusion",label:"Conclusion",get value(){return a(o).conclusion},set value(e){a(o).conclusion=e}}),i(D);var V=t(D,2),f=s(V),ge=s(f);{var me=e=>{var r=Ne();p(e,r)},fe=e=>{var r=xe("Editar Post");p(e,r)};R(ge,e=>{d.loading?e(me):e(fe,!1)})}i(f);var be=t(f,2);be.__click=()=>{O(),d.error=!1,d.success=!1},i(V),i(x),i(h),K(()=>f.disabled=d.loading),Pe("submit",x,ae),p(m,h),$e()}Ae(["click"]);export{Ge as component,Ue as universal};
